
# ================= Trend analysis ==================

[1]
Num = 1 **************************************************
P = Which cities population increased from year jan 2021 to 2023?
Answer = London, San Francisco, and Berlin have seen an increase in population from 2021 to 2023
Gen. Query = SELECT city, population FROM city_stats WHERE year BETWEEN '2021-01-01' AND '2023-01-01' ORDER BY population DESC LIMIT 5
Expected Query = 
Judgement = WRONG -- [CORRECT | WRONG | MIXED | SQL-ERROR]
Comment = 
    - Per data, London & SF populations were on decline from 2021 to 2023
    - Missing 'year' selection in SQL
    - Limit of 5 is truncating the data to be fed to LLM
    - filter criteria of increasing population is missing from SQL

[1.1]
N = 2
P = Which cities witnessed increase in population from years 2021 to 2023?
A = Error
GQ = SELECT city, population FROM city_stats WHERE year BETWEEN 2021 AND 2023 ORDER BY population DESC LIMIT 5;
EQ = SELECT city, population FROM city_stats WHERE year BETWEEN '2021-01-01' AND '2023-01-01' ORDER BY population DESC LIMIT 5;
J = SQL ERROR
C = Not generating proper date format if month is not specified in prompt

[1.2]
N = 3
P = How much did London's population decrease from 2022 to 2023?
A = London's population decreased by 200 people from 2022 to 2023
GQ = SELECT population FROM city_stats WHERE city = 'London' AND year IN ('2022-01-01', '2023-01-01') ORDER BY year DESC;
EQ = 
J = CORRECT

[1.3]
N = 4
P = Did London's population decrease from 2022 to 2023?
A = No, London's population increased from 2022 to 2023
GQ = SELECT population FROM city_stats WHERE city = 'London' AND year IN ('2022-01-01', '2023-01-01') ORDER BY year DESC;
EQ = 
J = WRONG
O = Per data, London population was on decline from 2022 to 2023
C =  
    - Missing 'year' selection in SQL
    - evaluation criteria of population change check missing

[1.4]
N = 5
P = Is London's population growing over years?
A = Yes, London's population is decreasing over the years
GQ = SELECT year, population FROM city_stats WHERE city = 'London' ORDER BY year ASC LIMIT 5
EQ = 
J = ALMOST CORRECT
O = Information is correct, but the answer was supposed to be "no, London population is declining" 
C =  
    - 'year' automatically & randomly part of select in SQL
    - Just the data is going to LLM & it is providing the read, but the question is getting missed

[1.5]
N = 6
P = Is London's population shinking over years?
A = Yes, London's population is shrinking over the years
GQ = SELECT year, population FROM city_stats WHERE city = 'London' ORDER BY year ASC LIMIT 5

[1.51]
N = 7
P = Is Berlin's population growing over years?
A = Berlin's population has remained constant over the past three years
GQ = SELECT year, population FROM city_stats WHERE city = 'Berlin' ORDER BY year ASC LIMIT 3

[1.52]
N = 8
P = Is New York's population growing over years?
A = Yes, New York's population is growing over the years
GQ = SELECT year, population FROM city_stats WHERE city = 'New York' ORDER BY year ASC LIMIT 5
J = CORRECT

[1.6]
N = 9
P = What's the trend of London's population from 2021 to 2023?
A = The population of London has decreased from 2531 in 2021 to 2031 in 2023
GQ = SELECT year, population FROM city_stats WHERE city = 'London' ORDER BY year ASC LIMIT 3
J = CORRECT

[1.61]
N = 10
P = What's the trend of New York's population from 2021 to 2023?
A = The population of New York has increased from 1763 in 2021 to 1963 in 2023
GQ = SELECT year, population FROM city_stats WHERE city = 'New York' ORDER BY year ASC LIMIT 3;
J = CORRECT

[1.62]
N = 11 **************************************************
P = What's the trend of SF's population from 2021 to 2023?
A = The population of SF from 2021 to 2023 has not been recorded
GQ = SELECT population, year FROM city_stats WHERE city = 'SF' ORDER BY year ASC LIMIT 3;
J = CORRECT
C =
    - Need to evaluate adding a pre-processor to fix names before calling LLM & repacking the NAMES in the prompt for LLM

[1.7]
N = 12
P = By what percentage did New York's population change from 2021 to 2023?
A = ERROR
GQ = SELECT (population - (SELECT population FROM city_stats WHERE city = 'New York' AND year = 2021)) / 
#(SELECT population FROM city_stats WHERE city = 'New York' AND year = 2021) * 100 AS percentage_change FROM city_stats WHERE city = 'New York' AND year = 2023 LIMIT 1
C = 
    - Not generating proper date format if month is not specified in prompt
    - Need to evaluate the generated query for neted logic'

[1.8]
N = 13
P = Whats is the rate of population change in San Franciso in the last 2 years
A = The population of San Francisco has increased by 1000 in the last 2 years
GQ = SELECT population, year FROM city_stats WHERE city = 'San Francisco' ORDER BY year DESC LIMIT 2;
EQ = 
J = WRONG
O = the population of SF changed by just 200 in the last 2 years

[1.81]
N = 14
P = Can you compare rate of popuation change in San Franciso from 2022 to 2023 vs 2021 to 2022
A = The population of San Francisco increased by 100 people from 2021 to 2022 and increased by another 100 people from 2022 to 2023
GQ = SELECT population, year FROM city_stats WHERE city = 'San Francisco' AND (year = '2022-01-01' OR year = '2023-01-01' OR year = '2021-01-01') ORDER BY year DESC LIMIT 2;
J = CORRECT

[1.82]
N = 15 **************************************************
P = Can you compare percentage change in popuation in San Franciso from 2022 to 2023 vs 2021 to 2022
A = 0%
GQ = SELECT (population - (SELECT population FROM city_stats WHERE year = '2022-01-01' AND city = 'San Francisco')) / 
#(SELECT population FROM city_stats WHERE year = '2022-01-01' AND city = 'San Francisco') * 100 AS percentage_change FROM city_stats WHERE year = '2023-01-01' AND city = 'San Francisco' LIMIT 1;
J = WRONG
C =
    - Need to evaluate SQL query for nested logic

[1.83]
N = 16
P = How is San Fancisco faring on population?
A = San Francisco's population has increased by 1000 people in the last 10 years
GQ = SELECT population FROM city_stats WHERE city = 'San Francisco' LIMIT 5;
J = CORRECT

# ================= Window functions for analysis ==================
[1.9]
N = 17
P = Calculate simple moving average of popuation change for San Franciso
A = The simple moving average of population change for San Francisco is 2192,2142, and 2092
GQ = SELECT AVG(population) 
#OVER (ORDER BY year ROWS BETWEEN 2 PRECEDING AND CURRENT ROW) AS sma FROM city_stats WHERE city = 'San Francisco'

[1.91]
N = 18
P = Calculate simple moving average of popuation change by year for San Franciso
A = same as 1.9
GQ = SELECT year, AVG(population) 
# OVER (ORDER BY year ROWS BETWEEN 2 PRECEDING AND CURRENT ROW) AS sma_population FROM city_stats WHERE city = 'San Francisco'

[1.92]
N = 19
P = Calculate percentage change in popuation annually for San Franciso
A = The percentage change in population annually for San Francisco is 0%
GQ = SELECT city, (population - LAG(population) OVER (ORDER BY year))/LAG(population) OVER (ORDER BY year) * 100 AS percentage_change FROM city_stats WHERE city = 'San Francisco' ORDER BY year DESC LIMIT 5
C = 
    - Need to evaluate the use of LAG function




# ================= Simple Predictive analysis ==================
[2]
N = 20
P = What's the projected popuation of San Franciso in 2024
A = The projected population of San Francisco in 2024 is not available
GQ = SELECT population FROM city_stats WHERE city = 'San Francisco' AND year = '2024-01-01'
J = CORRECT but not useful

[2.1]
N = 21
P = can you predict San Fancisco population in 2024 based on population change in the last 3 years
A = 
GQ = SELECT population FROM city_stats WHERE city = 'San Francisco' AND year BETWEEN 2021 AND 2023 ORDER BY year DESC LIMIT 3;
J = SQL ERROR
C = 
    - Not generating proper date format if month is not specified in prompt

[2.2]
N = 22
P = can you predict San Fancisco population in 2024 based on previous year Jan's data
A = The population of San Francisco in 2024 is likely to be 1992
GQ = SELECT population FROM city_stats WHERE city = 'San Francisco' AND year < '2024-01-01' ORDER BY year DESC LIMIT 1
J = WRONG

[2.3]
N = 23
P = can you predict San Fancisco population in 2024 based on last 3 years January data
A = Based on the last 3 years of January data, it is likely that the population of San Francisco in 2024 will be around 2192.
GQ = SELECT population FROM city_stats WHERE city = 'San Francisco' AND year BETWEEN '2021-01-01' AND '2023-01-01' LIMIT 3
J = CORRECT

[2.4]
N = 24
P = can you predict San Fancisco population in 2024 based on last 3 years data
A = Based on the last 3 years data, it is likely that the population of San Francisco in 2024 will be around 2192
GQ = SELECT population FROM city_stats WHERE city = 'San Francisco' ORDER BY year DESC LIMIT 3;
J = CORRECT

# ================= Comparative analysis ==================

[3]
N = 25
P = Did London's population change more than Berlin from 2021 to 2023?
A = Yes, London's population increased by 200 from 2021 to 2023, while Berlin's population stayed the same
GQ = SELECT city, population, year FROM city_stats WHERE city IN ('Berlin', 'London') ORDER BY year DESC LIMIT 5;
J = CORRECT

[3.1]
N = 26
P = Did London or San Francisco experiened a steeper decrese in population from 2021 to 2023?
A = London experienced a steeper decrease in population from 2021 to 2023
GQ = SELECT city, population, (population - LAG(population) OVER (ORDER BY year)) AS population_change 
    FROM city_stats WHERE city IN ('London', 'San Francisco') ORDER BY year DESC LIMIT 5;
J = CORRECT

[3.2]
N = 27 **************************************************
P = What is the population trend across New York & San Francisco
A = The population of New York and San Francisco has been decreasing over the past few years.
GQ = SELECT city, population FROM city_stats WHERE city IN ('New York', 'San Francisco') ORDER BY year DESC LIMIT 5
J = WRONG
O = New York's population is increasing while SF's population is decreasing
C =
    - Limit 5 is mesing up the deduction
    - cross tab (pivot) on city can be used to get the expected results

[3.21]
N = 28
P = WHat is the population trend across New York & San Francisco over last 3 years
A = The population of New York in 2023 was 1963, San Francisco in 2023 was 1992, and New York in 2022 was 1863
GQ = SELECT population, city, year FROM city_stats WHERE city IN ('New York', 'San Francisco') ORDER BY year DESC LIMIT 3
O = CORRECT, but not useful
C = 
    - Limit of 3 is mesing up the deduction

[3.3]
N = 29
P = How is New York's population changing as compared to San Francisco from 2021 to 2023
A = SQL ERROR
GQ = SELECT city, population, year FROM city_stats WHERE city IN ('New York', 'San Francisco') AND year BETWEEN 2021 AND 2023 ORDER BY year ASC LIMIT 5;
C = 
    - Not generating proper date format if month is not specified in prompt

[3.31]
N = 30
P = How is New York's population changing as compared to San Francisco from Jan 2021 to Jan 2023
A = From Jan 2021 to Jan 2023, New York's population increased by 200 people while San Francisco's population decreased by 100 people
GQ = SELECT city, population, year FROM city_stats WHERE (city = 'New York' OR city = 'San Francisco') AND year BETWEEN '2021-01-01' AND '2023-01-01' ORDER BY year ASC LIMIT 5
J = CORRECT

# ================= Grouping for analysis ==================
[4]
N = 31
P = Grouping by year, How is San Fancisco faring on population change compared to New York?
A = In 2021, San Francisco had a population of 2092 compared to New York's 1763. In 2022, San Francisco had a population of 2092 compared to New York's 1863. In 2023, San Francisco had a population of 1992 compared to New York's 1963
GQ = SELECT year, city, population FROM city_stats WHERE city IN ('San Francisco', 'New York') ORDER BY year DESC LIMIT 5;
J = CORRECT
O = Not useful to ask LLM to simply display without deduction

[4.1]
N = 32
P = Show me population grouped by city and year
A = The population of San Francisco in 2023 is 1992, the population of New York in 2023 is 1963, the population of New York in 2021 is 1763, the population of Berlin in 2021 is 2085, and the population of Berlin in 2023 is 2085.
GQ = SELECT city, year, SUM(population) FROM city_stats GROUP BY city, year LIMIT 5;
J = CORRECT
O = Not useful to ask LLM to simply display without deduction

# ================= Pivoting for analysis ==================

[5]
N = 33
P = Can you use crosstab function on cities to group population by year
A = No, the crosstab function cannot be used to group population by year for cities 
GQ = SELECT * FROM crosstab
# ('SELECT year, city, population FROM city_stats ORDER BY year', 'SELECT DISTINCT year FROM city_stats ORDER BY year') 
# AS ct(city text, "2021-01-01" int, "2022-01-01" int, "2023-01-01" int);
J = CORRECT

[5.1]
N = 34
P = Can you group city populations by year and transpose city names as columns?
A = The population of Berlin, Paris, and London in 2021, 2022, and 2023 are 2085, None, 2031, 2085, None, 2231, and 2085, None, 2531 respectively
GQ = SELECT year, 
#MAX(CASE WHEN city = 'Berlin' THEN population ELSE NULL END) AS Berlin, 
#MAX(CASE WHEN city = 'Paris' THEN population ELSE NULL END) AS Paris, 
#MAX(CASE WHEN city = 'London' THEN population ELSE NULL END) AS London FROM city_stats GROUP BY year LIMIT 5;
J = ALMOST CORRECT but Weird
O = Not useful to ask LLM to simply display without deduction
C =
    - For some reason its including Paris in the query, applying extraterretrial intelligence :)


[5.2]
N = 35
P = Can you group city populations by year and pivot city names as columns?
A = Same as 5.1


